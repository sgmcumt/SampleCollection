
## 一、WCF服务库、WCF服务应用程序的不同

### WCF服务库：
    可以认为是一个包含WCF服务以及契约定义的类库。
    不能直接运行，可以在其他项目里引用，在宿主里启用托管这个库，有点类似于我们在Web项目中应用的类库。在分布式开发中，基于服务设计的思想，WCF服务很多时候都直接定义为单独的库，可以为其它项目使用，更好的体现提高代码的复用性。

### WCF服务应用程序：
    是一个可以执行的程序，它有独立的进程，可以直接看到运行的效果。它基于IIS托管的程序。
 
    我们知道前面讲解的WCF必须得将他们寄宿到其他程序，然后使用ServiceHost对象启动它，而在WCF服务应用程序中，我们就像使用webservice一样简单。
　　

## 二、WCF服务库的使用

### 添加新建项目-创建WCF服务库：MyWCFLibrary

#### 观察默认的接口和实体类：

【1】服务契约：（ServiceContract）服务契约定义了远程访问对象和可供调用的方法。

【1】数据契约：（DataContract）数据契约则是服务端和客户端之间要传送的自定义数据类型。
 
好处：一旦声明一个类型为DataContract，那么该类型就可以被序列化在服务端和客户端之间传送。

特别注意：只有声明为DataContract的类型的对象可以被传送，且只有成员属性会被传递，成员方法不会被传递。WCF对声明为DataContract的类型提供更加细节的控制，可以把一个成员排除在序列化范围以外，也就是说，客户端程序不会获得被排除在外的成员的任何信息，包括定义和数据。

默认情况下：所有的成员属性都被排除在外，因此需要把每一个要传送的成员声明为DataMember

#### 添加我们需要的接口和实现类

【1】将默认的接口和实现类改为IStudentService和StudentService
【2】在接口中我们可以添加Student实体类，并标注数据契约，和对应的数据成员。
【3】编写接口实现类的中的各种方法。

#### 修改配置文件中的基地址：
 <add baseAddress="http://localhost:8733/MyWCFLibrary/StudentService/" />

### 创建WCF宿主程序

添加新建项目-这里我们依然选择控制台程序：MyWCFConsoleDeploy

【1】添加自定义服务库的引用，找到WCF服务库的DLL文件，添加即可。

【2】添加系统服务库模块引用，添加引用的时候，选择框架，找到System.ServiceModel，添加即可。

【3】在Main方法中，按照以前的方法，编写启动WCF服务的代码。（注意命名空间的引入）。

【4】生成后，用管理员身份启动。这时候会出现错误提示：
        WCF 服务有零个应用程序(非基础结构)终结点....

**解决方法**：WCF服务的配置文件是在宿主项目里面，而不是WCF服务库里面。
    把配置文件复制倒刚才添加的控制台程序中即可。运行成功。

### 添加测试客户端

添加新建项目-创建windows应用程序：CallMyWCF

调用方式和前面一样。需要注意添加WCF模块的引用

## 三、WCF服务应用程序的使用

1. 添加新建项目-选择WCF服务应用程序-MyWCFApplication

    说明：我们可以在这里直接按照和WCF服务库一样的做法，添加接口、实现类。

2. 启动方法1：右键点击“StudentService.svc”选择在浏览器中查看，可以看到运行结果。说明WCF服务启动成功。

3. 启动方法2：将当前WCF服务应用程序设置为启动项目，选择Release，然后启动，可以看到一个列表，我们再点击StudentService.svc,同样在浏览器中看到和前面一样的效果，说明启动成功。

4. 在右键点击当前项目，选择发布--》自定义--》输入配置文件名称：MyWCFIISDeploy

继续下一步，Publish Method选择FileSystem，Target location选择一个路径即可，在这里我测试就放到桌面上：C:\Users\Administrator\Desktop\MyWCFIIS，然后继续下一页，或者直接选择发布即可。

这时候我们在桌面上就能看到发布后的文件。

5. 在IIS上面部署当前的WCF服务。 和普通的WebForm网站部署是一样的。这里面不讲解。


























